<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.hit.hradar.domain.evaluation.query.mapper.EvaluationQuestionMapper">
    <select id="selectQuestionsBySection"
            resultType="org.hit.hradar.domain.evaluation.query.dto.response.EvaluationQuestionFlatRow">

        SELECT
            q.question_id        AS questionId,
            q.question_type      AS questionType,
            q.question_content   AS questionContent,
            q.is_required        AS requiredStatus,
            q.rating_scale       AS ratingScale,
            o.option_id          AS optionId,
            o.option_content     AS optionContent,
            o.option_score       AS optionScore
        FROM evaluation_question q
                 LEFT JOIN objective_options o
                           ON o.question_id = q.question_id
        WHERE q.section_id = #{sectionId}
        ORDER BY q.question_id, o.option_id

    </select>


</mapper>