<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.hit.hradar.domain.competencyReport.query.mapper.CustomCodeMapper">

  <select id="findGroupCodes"
    parameterType="Long"
    resultType="org.hit.hradar.domain.competencyReport.query.dto.CustomCodeDTO">

    SELECT crc.CUSTOM_CODE_ID
         , crc.GROUP_CODE
         , crc.GROUP_NAME
      FROM competency_report_custom_code crc
     WHERE crc.COM_ID = #{comId}
       AND crc.CUSTOM_CODE IS NULL
     GROUP BY crc.CUSTOM_CODE_ID, crc.GROUP_CODE, crc.GROUP_NAME
  </select>

  <select id="findAllCustomCodeByGroupCode"
    resultType="org.hit.hradar.domain.competencyReport.query.dto.CustomCodeDTO">
    SELECT crc.CUSTOM_CODE_ID
         , crc.GROUP_CODE
         , crc.GROUP_NAME
         , crc.CUSTOM_CODE
         , crc.CUSTOM_NAME
      FROM competency_report_custom_code crc
     WHERE crc.COM_ID = #{comId}
       AND crc.GROUP_CODE = #{groupCode}
       AND crc.CUSTOM_CODE IS NOT NULL
     ORDER BY crc.CUSTOM_CODE_ID
  </select>

  <select id="findAllCustomCodes"
    resultType="org.hit.hradar.domain.competencyReport.query.dto.CustomCodeDTO">
    SELECT crc.CUSTOM_CODE_ID
         , crc.GROUP_CODE
         , crc.GROUP_NAME
         , crc.CUSTOM_CODE
         , crc.CUSTOM_NAME
         , crc.IS_DELETED
      FROM competency_report_custom_code crc
     WHERE crc.COM_ID = #{comId}
       AND crc.GROUP_CODE = #{groupCode}
       AND crc.CUSTOM_CODE IS NOT NULL
       AND crc.IS_DELETED = 'N'
     ORDER BY crc.CUSTOM_CODE_ID
  </select>
</mapper>
